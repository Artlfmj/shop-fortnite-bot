/// <reference types="node" />
import { EventEmitter } from 'events';
import { IQ, Message, Presence, StreamManagementAck, StreamManagementEnabled, StreamManagementFailed, StreamManagementResume } from '../protocol';
declare type Unacked = ['message', Message] | ['presence', Presence] | ['iq', IQ];
interface SMState {
    handled: number;
    id?: string;
    jid?: string;
    lastAck: number;
    unacked: Unacked[];
}
export default class StreamManagement extends EventEmitter {
    id?: string;
    jid?: string;
    allowResume: boolean;
    lastAck: number;
    handled: number;
    unacked: Unacked[];
    private pendingRequest;
    private inboundStarted;
    private outboundStarted;
    private cacheHandler;
    constructor();
    get started(): boolean;
    set started(value: boolean);
    load(opts: SMState): void;
    cache(handler: (data: SMState) => void): void;
    bind(jid: string): void;
    enable(): void;
    resume(): void;
    enabled(resp: StreamManagementEnabled): void;
    resumed(resp: StreamManagementResume): void;
    failed(resp: StreamManagementFailed): void;
    ack(): void;
    request(): void;
    process(ack: StreamManagementAck | StreamManagementResume | StreamManagementFailed, resend?: boolean): void;
    track(kind: string, stanza: Message | Presence | IQ): void;
    handle(): void;
    private _cache;
    private _reset;
}
export {};
